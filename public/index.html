<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <title>Qwant Maps - beta</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no'/>
    <link href='css/app.css' rel='stylesheet'/>
  </head>

  <body>
    <div id="scene_container" class="map_container"></div>

    <div id="panels"></div>
    <form onsubmit="return false" class="search_form">
      <div class="search_form__burger" onclick="fire('toggle_burger')">
        <div></div>
        <div></div>
        <div></div>
      </div>
      <div class="search_form__logo"></div>
      <input id="search" type="search" class="search_form__input" placeholder="OÃ¹ voulez-vous aller ?">
      <button class="search_form__action" onclick="fire('submit_autocomplete')"></button>
    </form>
    <div class="loader_bar" id="loader-bar">
      <div id="progress-bar" class="loader_bar__progress"></div>
    </div>
    <script src="./file_loader.js"></script>

    <script>
      /* Autocomplete */
      document.onkeydown = (e) => {
        if(!e.shiftKey && !e.ctrlKey)
          document.getElementById('search').focus()
      }
      /* Progress */
      const progressBar = document.querySelector('#progress-bar')
      const loaderBar = document.querySelector('#loader-bar')
      let mapLoader = new FileLoader('./javascript/map.js')
      mapLoader.onLoad = () => {
        loaderBar.classList.add('loader_bar--loaded')
      }
      mapLoader.onProgress = (e) => {
        progressBar.style.width = `${e.loaded / e.total * 100}%`
      }
    </script>
    <script src="./message/en_GB.js"></script>
    <script src="./javascript/bundle.js"></script>
  </body>
</html>
